<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Smartlete Geography</title>
<link rel="stylesheet" type="text/css" href="Css.css">

</head>
<body>
  
      
     
<div class="navbar">
  <a href="Main.html"><span class="Smart">Smart</span><span class="Lete">lete.</span></a>

  <div class="dropdown">
    <button class="dropbtn">Quizzes
      <i class="menudrop"></i>
    </button>
    <div class="dropdown-content">
      <a href="Geo.html">Geography</a>
      <a href="Sports.html">Sports</a>
      <a href="#">History</a>
    </div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">Sports
      <i class="menudrop"></i>
    </button>
    <div class="dropdown-content">
      <a href="#">Football</a>
      <a href="#">Formula 1 </a>
      <a href="#">Basketball</a>
    </div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">History
      <i class="menudrop"></i>
    </button>
    <div class="dropdown-content">
      <a href="#">Famous Battles</a>
      <a href="#">Historical Figures</a>
      <a href="#">Monumental Events</a>

    </div>
  </div>
  <div class="dropdown">
    <button class="dropbtn">General Knowlege
      <i class="menudrop"></i>
    </button>
    <div class="dropdown-content">
      <a href="#">Sports News</a>
      <a href="#">Betting News</a>
    </div>
  </div>
  
  <div class="dropdown">
    <button class="dropbtn">Your Account
      <i class="menudrop"></i>
    </button> 
    </div>
    <span id="username" class="username"></span>
  </div>
    
  <div class="container">
    <section class="quiz-section">
     <div class="quiz-box">
      <h1>Smartlete Quiz</h1>
       <div class="quiz-header">
         <span>Quiz Website </span>
         <span class ="header-score">Score 0 / 5</span>
       </div> 
 
         <h2 class ="question-text">Which of these are a capital of an African country? </h2>
 
         <div class = "option-list">
           <div class = "option">
             <span>A. Paris</span>
           </div>
           <div class = "option">
             <span>B. Rabat</span>
           </div>
           <div class = "option">
             <span>C. Cairo</span>
           </div>
           <div class = "option">
             <span>D. London</span>
           </div>
         </div>
 
         <div class = "quiz-footer">
           <span class="question-total">1 of 5 Questions</span>
           <button class="next-btn">Next</button> 
         </div>
     </div>
 
     <div class="result-box">
       <h2>Quiz Result</h2>
       <div class = "percentage-container">
         <div class="circular-progress">
           <span class = "progress-value">0%</span>
         </div>
 
         <span class = "score-text">Your Score: 0 out of 5 </span>
       </div>
 
       <div class ="buttons">
         <button class="tryAgain-btn">Replay?</button>
         <button class ="goHome-btn">Home</button>
         
       </div>
 
     </div>
    </section>
 
 
    <section class = "home">
   <div class = "home-content">
     <h1>Smartlete Geography Quizzes</h1>
     <p> Quizzes</p>
     <button class ="start-btn">Start Quiz</button>
   </div>
  </section>
   </div>
 
 
  <div class = "popup-info">
   <h2>Quiz Info</h2>
   <span class = "info">- There are 5 sport related questions in a set order. </span>
   <span class = "info">- Your score will be displayed in the top right corner.</span>
   <span class = "info">- There is no time limit.</span>
 
  <div class="btn-group">
    <button class="info-btn exit-btn">Exit Quiz</button>
    <a href="#" class="info-btn continue-btn">Continue</a>
  </div>
   
 
  </div>

    
  <script src="Questions.js"></script>
    <script>

    

    const startBtn = document.querySelector('.start-btn');
    const popupInfo = document.querySelector('.popup-info');
    const exitBtn = document.querySelector('.exit-btn');
    const continueBtn = document.querySelector('.continue-btn');
    const quizSection = document.querySelector('.quiz-section');
    const quizBox = document.querySelector('.quiz-box');
    const resultBox = document.querySelector('.result-box');
    const tryAgainBtn = document.querySelector('.tryAgain-btn');
    const goHomeBtn = document.querySelector('.goHome-btn');


startBtn.onclick = () => {
    popupInfo.classList.add('active');
}

exitBtn.onclick = () => {
    popupInfo.classList.remove('active');
}

continueBtn.onclick = () => {
    quizSection.classList.add('active')
    popupInfo.classList.remove('active');
    quizBox.classList.add('active');

    showQuestions(0);
    questionCounter(1);
    headerScore(0);
}

 tryAgainBtn.onclick = () => {
    quizBox.classList.add('active');
    nextBtn.classList.remove('active');
    resultBox.classList.remove('active');

    questionCount = 0;
    questionNumb = 1;
    userScore = 0;
    showQuestions(questionCount);
    questionCounter(questionNumb);

    headerScore();
}

goHomeBtn.onclick = () => {
    quizSection.classList.remove('active');
    nextBtn.classList.remove('active');
    resultBox.classList.remove('active');

    questionCount = 0;
    questionNumb = 1;
    userScore = 0;
    showQuestions(questionCount);
    questionCounter(questionNumb);

    headerScore();
}


let questionCount = 0;
let questionNumb = 1;
let userScore = 0;

const nextBtn = document.querySelector('.next-btn');

nextBtn.onclick = () => {
    if (questionCount < geographyquestions.length - 1) {
        questionCount++;
        showQuestions(questionCount);
        questionNumb++;
        questionCounter(questionNumb);

        nextBtn.classList.remove('active');
    } else {
        showResultBox();
    }
}

const optionList = document.querySelector('.option-list');

function showQuestions(index) {
    const questionText = document.querySelector('.question-text');
    questionText.textContent = `${geographyquestions[index].numb}. ${geographyquestions[index].question}`;

    let optionTag = `<div class="option"><span>${geographyquestions[index].options[0]}</span></div>
    <div class="option"><span>${geographyquestions[index].options[1]}</span></div>
    <div class="option"><span>${geographyquestions[index].options[2]}</span></div>
    <div class="option"><span>${geographyquestions[index].options[3]}</span></div>`;

    optionList.innerHTML = optionTag;

    const option = document.querySelectorAll('.option');
    for (let i = 0; i < option.length; i++) {
        option[i].setAttribute('onclick', 'optionSelected(this)');
    }
}

function optionSelected(answer) {
    let userAnswer = answer.textContent;
    let correctAnswer = geographyquestions[questionCount].answer;
    let allOptions = optionList.children.length;

    if (userAnswer == correctAnswer) {
        answer.classList.add('correct');
        userScore += 1;
        headerScore();
    } else {
        answer.classList.add('incorrect');

        for (let i = 0; i < allOptions; i++) {
            if (optionList.children[i].textContent == correctAnswer) {
                optionList.children[i].setAttribute('class', 'option correct');
            }
        }
    }
    for (let i = 0; i < allOptions; i++) {
        optionList.children[i].classList.add('disabled');
    }

    nextBtn.classList.add('active');
}

function questionCounter(index) {
    const questionTotal = document.querySelector('.question-total');
    questionTotal.textContent = `${index} of ${geographyquestions.length} Questions`;
}

function headerScore() {
    const headerScoreText = document.querySelector('.header-score');
    headerScoreText.textContent = `Score: ${userScore} / ${geographyquestions.length}`;
}

function showResultBox(){
    quizBox.classList.remove('active');
    resultBox.classList.add('active');

    const scoreText = document.querySelector('.score-text');
    scoreText.textContent = `Your Score ${userScore} out of ${geographyquestions.length}`;

    const circularProgress = document.querySelector('.circular-progress');
    const progressValue = document.querySelector('.progress-value');
    let progressStartValue = 0;
    let progressEndValue = (userScore / geographyquestions.length) * 100;
    let speed = 20; 

    let progress = setInterval(() =>{
    progressStartValue++;
    progressValue.textContent = `${progressStartValue}%`;
    circularProgress.style.background = `conic-gradient(#ff9900 ${progressStartValue * 3.6}deg, rgba(255, 255, 255, .1) 0deg)`

    if(progressStartValue == progressEndValue){
        clearInterval(progress);
     }
    }, speed);


}

      // Get the element where you want to display the username
      var usernameElement = document.querySelector('#username');
        
        // Retrieve the username from sessionStorage
        var username = sessionStorage.getItem('username');
        
        // Display the username in the element
        usernameElement.textContent = username;
        
        document.getElementById("username").innerHTML = username;
    

        </script>
        </body>
    </html>
